<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Display a map on a webpage</title>
        <meta
            name="viewport"
            content="initial-scale=1,maximum-scale=1,user-scalable=no"
        />
        <link
            href="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.css"
            rel="stylesheet"
        />
        <script src="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js"></script>
        <style>
            body {
                margin: 0;
                padding: 0;
            }
            #map {
                position: absolute;
                top: 0;
                bottom: 0;
                width: 100%;
            }
        </style>
    </head>
    <body>
        <div id="map"></div>
        <script>
            // TO MAKE THE MAP APPEAR YOU MUST
            // ADD YOUR ACCESS TOKEN FROM
            // https://account.mapbox.com
            mapboxgl.accessToken =
                '' // TODO: get from .env
            const map = new mapboxgl.Map({
                container: 'map', // container ID
                style: 'mapbox://styles/mapbox/streets-v11', // style URL
                center: [-73.567, 45.5017], // starting position [lng, lat]
                zoom: 11, // starting zoom
                projection: 'globe', // display the map as a 3D globe
            })

            // Create a new marker.
            const marker = new mapboxgl.Marker()
                .setLngLat([-73.567, 45.5])
                .addTo(map)
            const marker2 = new mapboxgl.Marker()
                .setLngLat([-73.568, 45.501])
                .addTo(map)
            const marker3 = new mapboxgl.Marker()
                .setLngLat([-73.569, 45.502])
                .addTo(map)

            const housingData = [
                { lat: '45.5227000', lng: '-73.5910000' },
                { lat: '45.4618370', lng: '-73.5737370' },
                { lat: '45.5082980', lng: '-73.5780540' },
                { lat: '45.4913080', lng: '-73.5850630' },
                { lat: '45.5209990', lng: '-73.5829110' },
                { lat: '45.4907930', lng: '-73.6226230' },
                { lat: '45.4873680', lng: '-73.6256990' },
                { lat: '45.4923350', lng: '-73.5844270' },
                { lat: '45.4826300', lng: '-73.5998500' },
                { lat: '45.5190580', lng: '-73.6093200' },
                { lat: '45.5013290', lng: '-73.5814890' },
                { lat: '45.5148040', lng: '-73.5755010' },
                { lat: '45.5071590', lng: '-73.5739700' },
                { lat: '45.5064220', lng: '-73.6270690' },
                { lat: '45.5011670', lng: '-73.5790780' },
                { lat: '45.4696350', lng: '-73.6300100' },
                { lat: '45.4788400', lng: '-73.5987800' },
                { lat: '45.5009940', lng: '-73.5786780' },
                { lat: '45.4789800', lng: '-73.5977400' },
                { lat: '45.5077940', lng: '-73.5739420' },
                { lat: '45.4842760', lng: '-73.6168580' },
                { lat: '45.5229100', lng: '-73.6130900' },
                { lat: '45.4929700', lng: '-73.5836490' },
                { lat: '45.4877800', lng: '-73.5930600' },
                { lat: '45.4966420', lng: '-73.5848220' },
                { lat: '45.4877650', lng: '-73.5924750' },
                { lat: '45.4720000', lng: '-73.6460000' },
                { lat: '45.4826163', lng: '-73.5920211' },
                { lat: '45.5105534', lng: '-73.5763509' },
                { lat: '45.4792400', lng: '-73.6234618' },
                { lat: '45.5156660', lng: '-73.5781753' },
                { lat: '45.5389901', lng: '-73.4767495' },
                { lat: '45.5316406', lng: '-73.5197384' },
                { lat: '45.4543221', lng: '-73.5495315' },
                { lat: '45.4622478', lng: '-73.5453193' },
                { lat: '45.4560229', lng: '-73.5457030' },
                { lat: '45.4545653', lng: '-73.5457917' },
                { lat: '45.4610023', lng: '-73.5458936' },
                { lat: '45.4559058', lng: '-73.5484916' },
                { lat: '45.4565586', lng: '-73.5432091' },
                { lat: '45.4565586', lng: '-73.5432091' },
                { lat: '45.4584496', lng: '-73.5473028' },
                { lat: '45.4584204', lng: '-73.5463351' },
                { lat: '45.4538297', lng: '-73.5477307' },
                { lat: '45.4582667', lng: '-73.5419714' },
                { lat: '45.4958391', lng: '-73.6194538' },
                { lat: '45.4786748', lng: '-73.6295110' },
                { lat: '45.5097752', lng: '-73.5710217' },
                { lat: '45.5209665', lng: '-73.5660437' },
                { lat: '45.4820663', lng: '-73.6312488' },
                { lat: '45.4634887', lng: '-73.6460481' },
                { lat: '45.4797759', lng: '-73.5944424' },
                { lat: '45.4761270', lng: '-73.6034198' },
                { lat: '45.4811039', lng: '-73.6304021' },
                { lat: '45.5070831', lng: '-73.5762515' },
                { lat: '45.5083756', lng: '-73.5734861' },
                { lat: '45.4953409', lng: '-73.5814077' },
                { lat: '45.5497167', lng: '-73.6268176' },
                { lat: '45.5260190', lng: '-73.5743010' },
                { lat: '45.5127588', lng: '-73.6236483' },
                { lat: '45.4922733', lng: '-73.5623680' },
                { lat: '45.5100707', lng: '-73.5756386' },
                { lat: '45.4850351', lng: '-73.5914642' },
                { lat: '45.4918112', lng: '-73.5861595' },
                { lat: '45.4952181', lng: '-73.6144237' },
                { lat: '45.5107510', lng: '-73.5747656' },
                { lat: '45.5001496', lng: '-73.5093437' },
                { lat: '45.5187515', lng: '-73.5679589' },
                { lat: '45.5041023', lng: '-73.5619967' },
                { lat: '45.5041023', lng: '-73.5619967' },
                { lat: '45.5042970', lng: '-73.6295990' },
                { lat: '45.5025450', lng: '-73.5783050' },
                { lat: '45.4953675', lng: '-73.6084153' },
                { lat: '45.4907527', lng: '-73.6460288' },
                { lat: '45.5255965', lng: '-73.5507192' },
                { lat: '45.4871670', lng: '-73.5679852' },
                { lat: '45.4898790', lng: '-73.6518199' },
                { lat: '45.5115897', lng: '-73.5716667' },
                { lat: '45.4867600', lng: '-73.6264700' },
                { lat: '45.4951580', lng: '-73.6108791' },
                { lat: '45.5134616', lng: '-73.5694703' },
                { lat: '45.5136657', lng: '-73.5676883' },
                { lat: '45.5138542', lng: '-73.5691972' },
                { lat: '45.5816140', lng: '-73.5442017' },
                { lat: '45.5676344', lng: '-73.5538360' },
                { lat: '45.5077126', lng: '-73.5774561' },
                { lat: '45.4960380', lng: '-73.5810623' },
                { lat: '45.4912810', lng: '-73.5808636' },
                { lat: '45.5073536', lng: '-73.5734805' },
                { lat: '45.5057659', lng: '-73.5648250' },
                { lat: '45.4631488', lng: '-73.6268091' },
                { lat: '45.5078350', lng: '-73.6381238' },
                { lat: '45.4943779', lng: '-73.6307599' },
                { lat: '45.4622665', lng: '-73.6271305' },
                { lat: '45.5087239', lng: '-73.6293264' },
                { lat: '45.4640097', lng: '-73.6266048' },
                { lat: '45.5193014', lng: '-73.4725306' },
                { lat: '45.4856661', lng: '-73.4865936' },
                { lat: '45.5297327', lng: '-73.5669469' },
                { lat: '45.4773668', lng: '-73.6058812' },
                { lat: '45.4924050', lng: '-73.5792590' },
                { lat: '45.4723451', lng: '-73.6261748' },
                { lat: '45.5148800', lng: '-73.6413700' },
                { lat: '45.4924050', lng: '-73.5792590' },
                { lat: '45.4893820', lng: '-73.6245960' },
                { lat: '45.4787120', lng: '-73.6268820' },
                { lat: '45.5159620', lng: '-73.5903670' },
                { lat: '45.4824010', lng: '-73.4819890' },
                { lat: '45.4888800', lng: '-73.6245700' },
                { lat: '45.4943610', lng: '-73.6192000' },
                { lat: '45.4875900', lng: '-73.4915000' },
            ]
            for (const coords of housingData) {
                const long = parseFloat(coords.lng)
                const lat = parseFloat(coords.lat)
                console.log('adding...', long, lat)
                new mapboxgl.Marker().setLngLat([long, lat]).addTo(map)
            }

            map.on('style.load', () => {
                map.setFog({}) // Set the default atmosphere style
            })
        </script>
    </body>
</html>
